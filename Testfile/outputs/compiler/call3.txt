AST tree:
[NamedCall (AstSymbol "fact") (Lambda (AstList [AstSymbol "a"]) (AstList [If (AstList [AstSymbol "a",LogicOperator "==",AstInt 1]) (AstList [AstCall (AstSymbol "return") (AstList [AstInt 1])]) AstNone,AstCall (AstSymbol "return") (AstList [AstMathOp (AstCall (AstSymbol "fact") (AstList [AstMathOp (AstSymbol "a") (AstOperator "-") (AstInt 1)])) (AstOperator "*") (AstSymbol "a")])])),AstCall (AstSymbol "fact") (AstList [AstInt 5])]
(env)
[("fact",Function [PushArg 0,AssignEnvValue "a",PushVMEnv "a",Push (IntValue 1),Push (Operator Eq),CallOp,JumpIfFalse 1,Push (IntValue 1),PushVMEnv "a",Push (IntValue 1),Push (Operator Sub),CallOp,PushVMEnv "fact",Call 1,PushVMEnv "a",Push (Operator Mul),CallOp,Ret])]
(insts)
[Push (IntValue 5),PushVMEnv "fact",Call 1,Ret]
Environment:
fact = FUNCTION [PushArg 0,AssignEnvValue "a",PushVMEnv "a",Push (IntValue 1),Push (Operator Eq),CallOp,JumpIfFalse 1,Push (IntValue 1),PushVMEnv "a",Push (IntValue 1),Push (Operator Sub),CallOp,PushVMEnv "fact",Call 1,PushVMEnv "a",Push (Operator Mul),CallOp,Ret]
Instructions:
Push (IntValue 5)
PushVMEnv "fact"
Call 1
Ret