AST tree:
[Define (AstSymbol "a") (AstInt 5),Define (AstSymbol "b") (AstInt 5),If (AstList [AstSymbol "a",LogicOperator "==",AstSymbol "b"]) (AstList [Define (AstSymbol "x") (AstInt 5),If (AstList [AstSymbol "a",LogicOperator "==",AstSymbol "x"]) (AstCall (AstSymbol "print") (AstList [AstString "a is greater"])) (AstCall (AstSymbol "print") (AstList [AstString "a is smaller"]))]) (AstList [Define (AstSymbol "x") (AstInt 5),If (AstList [AstSymbol "a",LogicOperator "==",AstSymbol "x"]) (AstCall (AstSymbol "print") (AstList [AstString "x is greater"])) (AstCall (AstSymbol "print") (AstList [AstString "x is smaller"]))]),AstCall (AstSymbol "print") (AstList [AstString "outside"])]
(env)
[]
(insts)
[Push (IntValue 5),AssignEnvValue "a",Push (IntValue 5),AssignEnvValue "b",PushVMEnv "a",PushVMEnv "b",Push (Operator Eq),CallOp,JumpIfFalse 13,Push (IntValue 5),AssignEnvValue "x",PushVMEnv "a",PushVMEnv "x",Push (Operator Eq),CallOp,JumpIfFalse 3,Push (StringValue "a is greater"),PushToOutput,Jump 2,Push (StringValue "a is smaller"),PushToOutput,Jump 12,Push (IntValue 5),AssignEnvValue "x",PushVMEnv "a",PushVMEnv "x",Push (Operator Eq),CallOp,JumpIfFalse 3,Push (StringValue "x is greater"),PushToOutput,Jump 2,Push (StringValue "x is smaller"),PushToOutput,Push (StringValue "outside"),PushToOutput,Ret]
Environment:
Instructions:
Push (IntValue 5)
AssignEnvValue "a"
Push (IntValue 5)
AssignEnvValue "b"
PushVMEnv "a"
PushVMEnv "b"
Push (Operator Eq)
CallOp
JumpIfFalse 13
Push (IntValue 5)
AssignEnvValue "x"
PushVMEnv "a"
PushVMEnv "x"
Push (Operator Eq)
CallOp
JumpIfFalse 3
Push (StringValue "a is greater")
PushToOutput
Jump 2
Push (StringValue "a is smaller")
PushToOutput
Jump 12
Push (IntValue 5)
AssignEnvValue "x"
PushVMEnv "a"
PushVMEnv "x"
Push (Operator Eq)
CallOp
JumpIfFalse 3
Push (StringValue "x is greater")
PushToOutput
Jump 2
Push (StringValue "x is smaller")
PushToOutput
Push (StringValue "outside")
PushToOutput
Ret